# 科学上网

## 科学上网的原理

<img :src="$withBase('/online.png')" alt="online">
如上图所示，红色的墙`GWF`指的是长城防火墙，如果你想从大陆访问国外的服务器，比如访问`Google`,`YouTube`是不能直接访问的，因为被`GFW`阻断。但是有些国外的服务器是没有被`GFW`阻断的，我们可以先和这台服务器通信，然后通过这台服务器访问被阻断的服务器，这台服务器就是<font color=#3eaf7c>代理服务器</font>，通过代理服务器我们就可以间接的访问被阻断的访问器。

### 1. VPN
使用代理服务器有很多种，前几年比较流行的<font color=#3eaf7c>VPN</font>,它的中文意思是<font color=#3eaf7c>虚拟专用网</font>，最开始用于企业用途，比如你在外地出差，想要访问企业内部的服务`OA`或者`ERP`，可以通过vpn来访问企业内部,因为企业内部的服务是不能连接互联网的，那么企业就可以设置一台VPN服务器，配置两块网卡，一块连接企业内部网络，一块连接互联网，在外出差可以通过vpn来访问企业服务。

`VPN`有三种协议，`PPTP`,`L2TP`,`IPSec`,不过这三种协议已经在`GFW`的黑名单中了，所以你使用vpn上网可能使用几天就不能用了。

### 2. SSR
`SSR`是破娃酱在`SS`的基础上改进的一款科学上网的软件，无论是`SS`还是`SSR`都是使用`SOCKS5`协议，目前是一款比较稳定易用的科学上网工具。可以在[github官网](https://github.com/shadowsocksrr/shadowsocksr-csharp/releases)上去下载,下载.zip文件解压，然后点击`ShadowsocksR-dotnet4.0`，如果打不开可能你的电脑缺少`.net framework 4.0`，因为这个软件是使用C++和C#开发的

### 3. 操作流程
点击`ShadowsocksR-dotnet4.0`，然后你的电脑右下角会弹出一个小飞机的图标，初次打开是个白色的小飞机，而且初次打开是<font color=#3eaf7c>全局模式</font>还有<font color=#3eaf7c>服务器负载均衡</font>，特别要主要关掉这个服务器负载均衡，虽然名字听起来是对我们好的，但实际上可能会造成翻不了墙。

然后去掉负载均衡就会显示蓝色的小飞机，然后我们逐一讲解：

<font color=#3eaf7c>系统代理模式</font>：有三种连接模式分别是直连，PAC和全局模式，还有保持当前状态不修改
+ <font color=#3eaf7c>直连模式</font>：电脑不使用SSR连接代理，相当于你的电脑没有打开SSR软件
+ <font color=#3eaf7c>PAC模式</font>：就是利用PAC文件控制你的电脑流量
+ <font color=#3eaf7c>全局模式</font>：和直连模式相反，全局模式就是无论你是访问国外的网站（youtobe，google）还是国内的网站（百度，网易）,走的都是这个SSR代理

第二项<font color=#3eaf7c>PAC</font>有很多PAC文件的配置方式。直接去更新PAC是无法更新成功的，而且也不会有错误提示。刚才我们下载的ssr文件中是没有PAC文件的，你必须连接一个SSR节点才能更新成功。所以正确的做法是：<font color=#3eaf7c>我们在服务器->woocloud当中选择一个SSR节点，然后回到PAC选项中去选择'更新PAC为绕过局域网IP'</font>，如果更新不成功说明节点不能用，或者退出SSR重新打来。如果更新成功下方会显示`更新PAC成功`

更新成功后会在ssr文件夹中生成一个`pac`的文本文件，打开pac文件，你会发现里面有4个局域网网段，刚才你选择的是`绕过局域网IP`，意思就是你访问局域网中的WEB服务器，比如公司或者学校，流量是不会经过SSR代理节点的。

然后如果我们选择的是`更新PAC为绕过大陆常见域名列表`,或者`更新PAC为逃过大陆IP(慎用)`或者`更新PAC为仅通过大陆常见域名（国外访问大陆）`,这三个生成的pac文件中的域名列表是一样的，基本上这里包含的域名都是国内常见的地址和域名，你访问这些地址本身不需要翻墙，所以不走SSR流量的。假如你在国外想访问国内可以选择
`更新PAC为仅通过大陆常见域名（国外访问大陆）`

如果我们选择的是`更新PAC为GFWList`，pac文件中的域名或者地址都是已经被长城防火墙阻塞的，就是这些地址你不翻墙都访问不了的，包含我们常见的google、youtobe等等

`复制PAC URL`这个选项是什么意思？就是pac文件在你电脑中的路径，当然不是文件路径，是url路径，这个路径是可以在浏览器打开并下载的，下载的就是pac文件本身。这个通常用于你忘记ssr存储路径，暂时好像没有啥用

`编辑本地PAC文件`这个选项应该很好理解，它会打开pac文件的路径，然后你就可以编辑，可以向里面添加一下域名地址等等，比如你访问的国外的某个地址不在pac的域名列表，你就可以添加域名或者地址到pac文件中。

第三项<font color=#3eaf7c>代理规则</font>其实和系统代理模式差不多。

总之我们使用这个SSR软件基本就上通过上面三个选项：`系统代理模式`，`PAC`和`代理规则`进行流量的控制

### 4. 其他选项说明
1. **服务器**
SSR软件默认自带一个节点就是`FreeSSR-public`，当时也不是用的。然后我们可以自己有自己的机场，后面我们会推荐几个免费的机场

`编辑服务器`：会打开一个窗口，会显示所有服务器节点的列表，然后我们可以添加和删除服务器节点，当然我们使用SSR软件本身会在本机打开一个端口，端口就是1080,我们下面可以看一下这个窗口，然后看看服务器一些参数：
<img :src="$withBase('/SSRserver.png')" alt="SSRserver">
+ <font color=#CC99CD>服务器IP</font>：默认是看不到的，点击左边的小框框就能看到了，但是这个地址在浏览器是直接打不开的，但是在cmd中可以ping出来，而且通过ping这个地址可以看这个节点能不能用，还有通过时间可以看出延迟是多少，时间越少说明节点网络越好。如果有中断，那说明节点网络不太好。TTL指的系统，比如TTL=42指的是对方是linux系统
+ <font color=#CC99CD>服务器端口</font>：对面服务器，或者SSR节点使用的服务器的端口号
+ <font color=#CC99CD>协议、混淆</font>：更好的规避长城防火墙检测到这个流量
+ <font color=#CC99CD>SSR地址</font>：SSR地址，点击它，然后旁边会出来一个二维码

`从文件导入服务器`：这个其实一般是从一个json文件中导入服务器各种参数，一般是机场主干的事情

`优先相同节点连接同一个地址`：这个其实一般不会打开，本主也不知道有啥用

`服务器连接统计`：

## 获取机场（第一种方法：订阅）
下载ssr，上面都有说怎么下载。

登录[http://ncucloud.ml/](http://ncucloud.ml/)注册账号，新用户可以免费试用3天

然后在用户中心的下面，我们会看到有普通节点订阅地址和单端口节点订阅地址，点击复制

回到小飞机，在系统代理模式选择PAC模式，然后在选项设置，在负载均衡中选择选中优先

点击服务器订阅，添加，添加刚才复制的网址，然后点击确定

右击小飞机，然后在服务器订阅中点击`更新SSR服务器订阅（不通过代理）`，更新成功会有通知，没有成功就多更新几遍

然后回到服务器，选择刚才那个免费的节点，然后就可以翻墙了

## 免费节点获取（第二种方法：SSR节点方法）
1. [https://free-ss.site/](https://free-ss.site/)(需要翻墙)，虽然它在国内有镜像网站，但是常常被封掉，所以我们需要`镜像网站`之类的字眼，发邮件到这里[ss@rohankdd.com](ss@rohankdd.com)获取最新的镜像网站，很麻烦。我们可以同通过修改hosts文件来直接上这网站，在电脑的C盘>Windows>System32>drivsers>etc>hosts,记事本打开在最后输入`104.18.18.18  free-ss.site`即可

2. [https://www.ssrtool.com/tool/free_ssr](https://www.ssrtool.com/tool/free_ssr)(需要翻墙)，它的直连方式[https://www.eruo.ml/tool/free_ssr](https://www.eruo.ml/tool/free_ssr)

打开两个网站，然后开发二维码，然后用SSR客户端的二维码扫描去添加即可，第一次可能会不成功，我们还需要配置系统代理模式为PAC

另外对于`https://www.ssrtool.com/tool/free_ssr`这个网站的二维码一般扫描不上，我们只能用复制ssr的连接，然后在小飞机中点击`从剪贴板中批量导入ssr连接`


**参考资料**

1. [放弃VPN吧，目前最稳定的科学上网方式。电脑端SSR使用教程详解，花点耐心看完。翻墙原理以及VPN与SSR优劣比较，不再为翻墙发愁。授人与鱼不如授人与渔](https://www.youtube.com/watch?v=F6yh4b7ML5g)
2. [免费翻墙方法，两个机场，SSR节点，VPN科学上网教程2019](https://www.youtube.com/watch?v=QEkOhJlOSXE)
3. [iOS用户大福利，正版付费软件、游戏免费下载，包含Shadowrocket等多个翻墙工具](https://www.youtube.com/watch?v=p_bnMZD3YbM)